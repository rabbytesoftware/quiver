version: "0.2"

metadata:
  name: "quiver.chat"
  description: "Quiver Chat is a chat client for the Quiver platform."
  mainteiners:
    - "https://char2cs.net"
  credits:
    - "Rabbyte Software"
  license: "MIT"
  repository: "https://github.com/rabbytesoftware/quiver.chat"
  documentation: "https://github.com/rabbytesoftware/quiver.chat"
  version: "25.7.0"

requirements:
  system:
    - "windows/amd64"
    - "windows/arm64"
    - "linux/amd64"
    - "linux/arm64"
    - "darwin/amd64"
    - "darwin/arm64"
  minimum:
    cpu_cores: 1
    ram_gb: 1
    disk_gb: 1
    network_mbps: 1
  recommended:
    cpu_cores: 1
    ram_gb: 1
    disk_gb: 1
    network_mbps: 1

netbridge: 
  - name: "CHAT_PORT"
    protocol: "tcp/udp"

variables:
  - name: "QUIVER_CHAT_HOSTNAME"
    default: "chat.quiver.ar"
    sensitive: false

methods:
  windows:
    amd64:
      install: 
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-windows-amd64.zip"
        - "UNCOMPRESS: quiver-chat-windows-amd64.zip"
        - "MOVE: quiver-chat-windows-amd64.exe TO: ${INSTALL_DIR}\\quiver-chat.exe"
      execute:
        - "./quiver-chat.exe --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-windows-amd64.zip"
        - "UNCOMPRESS: quiver-chat-windows-amd64.zip"
        - "MOVE: quiver-chat-windows-amd64.exe TO: ${INSTALL_DIR}\\quiver-chat.exe"
      validate:
        - "echo 'Quiver Chat is installed and running.'"
    arm64:
      install:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-windows-arm64.zip"
        - "UNCOMPRESS: quiver-chat-windows-arm64.zip"
        - "MOVE: quiver-chat-windows-arm64.exe TO: ${INSTALL_DIR}\\quiver-chat.exe"
      execute:
        - "./quiver-chat.exe --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-windows-arm64.zip"
        - "UNCOMPRESS: quiver-chat-windows-arm64.zip"
        - "MOVE: quiver-chat-windows-arm64.exe TO: ${INSTALL_DIR}\\quiver-chat.exe"
      validate:
        - "echo 'Quiver Chat is installed and running.'"

  linux:
    amd64:
      install:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-linux-amd64.tar.gz"
        - "UNCOMPRESS: quiver-chat-linux-amd64.tar.gz"
        - "MOVE: quiver-chat-linux-amd64 TO: ${INSTALL_DIR}/quiver-chat"
      execute:
        - "./quiver-chat --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-linux-amd64.tar.gz"
        - "UNCOMPRESS: quiver-chat-linux-amd64.tar.gz"
        - "MOVE: quiver-chat-linux-amd64 TO: ${INSTALL_DIR}/quiver-chat"
      validate:
        - "echo 'Quiver Chat is installed and running.'"
    arm64:
      install:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-linux-arm64.tar.gz"
        - "UNCOMPRESS: quiver-chat-linux-arm64.tar.gz"
        - "MOVE: quiver-chat-linux-arm64 TO: ${INSTALL_DIR}/quiver-chat"
      execute: 
        - "./quiver-chat --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-linux-arm64.tar.gz"
        - "UNCOMPRESS: quiver-chat-linux-arm64.tar.gz"
        - "MOVE: quiver-chat-linux-arm64 TO: ${INSTALL_DIR}/quiver-chat"
      validate:
        - "echo 'Validating Quiver Chat...'"
  
  darwin:
    amd64:
      install:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-macos-amd64.tar.gz"
        - "UNCOMPRESS: quiver-chat-macos-amd64.tar.gz"
        - "MOVE: quiver-chat-macos-amd64 TO: ${INSTALL_DIR}/quiver-chat"
      execute:
        - "./quiver-chat --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-macos-amd64.tar.gz"
        - "UNCOMPRESS: quiver-chat-macos-amd64.tar.gz"
        - "MOVE: quiver-chat-macos-amd64 TO: ${INSTALL_DIR}/quiver-chat"
      validate:
        - "echo 'Validating Quiver Chat...'"
    arm64:
      install:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-macos-arm64.tar.gz"
        - "UNCOMPRESS: quiver-chat-macos-arm64.tar.gz"
        - "MOVE: quiver-chat-macos-arm64 TO: ${INSTALL_DIR}/quiver-chat"
      execute: 
        - "./quiver-chat --port ${CHAT_PORT}"
      uninstall:
        - "REMOVE: ${INSTALL_DIR}"
      update:
        - "GET: https://github.com/rabbytesoftware/quiver.chat/releases/download/v27.7.1-d278aae/quiver-chat-macos-arm64.tar.gz"
        - "UNCOMPRESS: quiver-chat-macos-arm64.tar.gz"
        - "MOVE: quiver-chat-macos-arm64 TO: ${INSTALL_DIR}/quiver-chat"
      validate:
        - "echo 'Validating Quiver Chat...'"
